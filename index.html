    <script>
        // === GESTION DE L'APPLICATION ===
        const USERS = [
            { 
                email: "admin@ascenseurs.com", 
                password: "Admin2024!", 
                role: "admin", 
                name: "Administrateur Principal",
                permissions: ["all"]
            },
            { 
                email: "technicien1@ascenseurs.com", 
                password: "Tech123!", 
                role: "technicien", 
                name: "Technicien Kone",
                permissions: ["kone", "thyssen", "documents", "diagnostics"]
            },
            { 
                email: "technicien2@ascenseurs.com", 
                password: "Tech123!", 
                role: "technicien", 
                name: "Technicien Thyssen",
                permissions: ["thyssen", "kone", "documents", "diagnostics"]
            }
        ];

        let currentUser = null;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üöÄ Application initialis√©e");
            
            // √âv√©nement de connexion
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value;
                console.log("Tentative de connexion:", email);

                const user = USERS.find(u => u.email === email && u.password === password);
                
                if (user) {
                    console.log("‚úÖ Connexion r√©ussie:", user.name);
                    currentUser = user;
                    window.currentUser = user;
                    showAppInterface();
                } else {
                    console.log("‚ùå √âchec connexion");
                    alert('‚ùå Email ou mot de passe incorrect');
                }
            });

            // V√©rifier si d√©j√† connect√©
            checkExistingSession();
        });

        function checkExistingSession() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showAppInterface();
            }
        }

        function showAppInterface() {
            console.log("üì± Affichage interface principale");
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appInterface').style.display = 'block';
            
            // Sauvegarder la session
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Afficher le bouton admin si n√©cessaire
            if (currentUser.role === 'admin') {
                document.getElementById('adminNavButton').classList.remove('d-none');
            }
            
            // Mettre √† jour l'interface
            document.getElementById('userRoleBadge').textContent = currentUser.role === 'admin' ? 'üëë Admin' : 'üîß Technicien';
            
            showSection('accueil');
        }

        function showSection(section) {
            console.log("üìÇ Chargement section:", section);
            const contentArea = document.getElementById('contentArea');
            
            // Mettre √† jour les boutons actifs
            document.querySelectorAll('.list-group-item').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            let content = '';
            switch(section) {
                case 'accueil':
                    content = getHomeContent();
                    break;
                case 'documents':
                    content = getDocumentsContent();
                    break;
                case 'diagnostic':
                    content = getDiagnosticContent();
                    break;
                case 'historique':
                    content = getHistoryContent();
                    break;
                case 'admin':
                    if(currentUser.role === 'admin') {
                        content = getAdminContent();
                    }
                    break;
                default:
                    content = getHomeContent();
            }
            
            contentArea.innerHTML = content;
        }

        function getHomeContent() {
            return `
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h4><i class="fas fa-home"></i> Tableau de Bord</h4>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-success">
                            <h5>Bienvenue ${currentUser.name} !</h5>
                            <p>Votre assistant IA pour le d√©pannage d'ascenseurs est op√©rationnel.</p>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="card text-center bg-primary text-white">
                                    <div class="card-body">
                                        <i class="fas fa-robot fa-2x mb-2"></i>
                                        <h5>IA Active</h5>
                                        <p>Pr√™te √† analyser</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center bg-success text-white">
                                    <div class="card-body">
                                        <i class="fas fa-folder fa-2x mb-2"></i>
                                        <h5>Documents</h5>
                                        <p>Gestion par marque</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center bg-warning text-dark">
                                    <div class="card-body">
                                        <i class="fas fa-stethoscope fa-2x mb-2"></i>
                                        <h5>Diagnostics</h5>
                                        <p>Analyse intelligente</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h5>D√©marrer maintenant :</h5>
                            <button class="btn btn-primary me-2" onclick="showSection('diagnostic')">
                                <i class="fas fa-stethoscope"></i> Nouveau diagnostic
                            </button>
                            <button class="btn btn-success me-2" onclick="showSection('documents')">
                                <i class="fas fa-folder-plus"></i> G√©rer les documents
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function getDocumentsContent() {
            return `
                <div class="card">
                    <div class="card-header bg-warning text-dark">
                        <h4><i class="fas fa-folder"></i> Documents Techniques</h4>
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#uploadModal">
                                <i class="fas fa-upload"></i> Ajouter un document
                            </button>
                        </div>
                        
                        <div class="alert alert-info">
                            <h6>Marques support√©es :</h6>
                            <p>Kone ‚Ä¢ Thyssen ‚Ä¢ Otis ‚Ä¢ Schindler ‚Ä¢ Sodimas</p>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h6>Kone</h6>
                                    </div>
                                    <div class="card-body">
                                        <p>Manuels et sch√©mas techniques Kone</p>
                                        <button class="btn btn-sm btn-outline-primary">
                                            Voir les documents
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h6>Thyssen</h6>
                                    </div>
                                    <div class="card-body">
                                        <p>Documentation technique Thyssen</p>
                                        <button class="btn btn-sm btn-outline-primary">
                                            Voir les documents
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getDiagnosticContent() {
            return `
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4><i class="fas fa-stethoscope"></i> Diagnostic IA</h4>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Description de la panne</label>
                            <textarea class="form-control" id="problemDescription" rows="4" 
                                      placeholder="Exemple: L'ascenseur fait un bruit anormal au 3√®me √©tage et les portes mettent du temps √† se fermer..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Marque concern√©e</label>
                            <select class="form-select" id="diagnosticBrand">
                                <option value="">Choisir une marque</option>
                                <option value="Kone">Kone</option>
                                <option value="Thyssen">Thyssen</option>
                                <option value="Otis">Otis</option>
                                <option value="Schindler">Schindler</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-warning w-100" onclick="analyzeWithAI()">
                            <i class="fas fa-robot"></i> Analyser avec l'IA
                        </button>
                        
                        <div id="aiResult" class="mt-4"></div>
                    </div>
                </div>
            `;
        }

        function getHistoryContent() {
            return `
                <div class="card">
                    <div class="card-header bg-secondary text-white">
                        <h4><i class="fas fa-history"></i> Historique</h4>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <p>Vos diagnostics appara√Ætront ici apr√®s analyse.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function getAdminContent() {
            return `
                <div class="card">
                    <div class="card-header bg-danger text-white">
                        <h4><i class="fas fa-crown"></i> Espace Administrateur</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Utilisateurs</h5>
                                    </div>
                                    <div class="card-body">
                                        <ul>
                                            <li>${currentUser.name} (Admin)</li>
                                            <li>Technicien Kone</li>
                                            <li>Technicien Thyssen</li>
                                        </ul>
                                        <button class="btn btn-success btn-sm">
                                            <i class="fas fa-user-plus"></i> Ajouter
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Statistiques</h5>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>IA:</strong> Op√©rationnelle</p>
                                        <p><strong>Documents:</strong> Pr√™ts</p>
                                        <p><strong>Techniciens:</strong> 2 actifs</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Fonctions utilitaires
        function logout() {
            if(confirm('D√©connexion ?')) {
                localStorage.removeItem('currentUser');
                location.reload();
            }
        }

        function analyzeWithAI() {
            const problem = document.getElementById('problemDescription').value;
            const brand = document.getElementById('diagnosticBrand').value;
            
            if (!problem) {
                alert('Veuillez d√©crire la panne');
                return;
            }
            
            const resultDiv = document.getElementById('aiResult');
            resultDiv.innerHTML = `
                <div class="alert alert-info">
                    <i class="fas fa-spinner fa-spin"></i> L'IA analyse le probl√®me...
                </div>
            `;
            
            // Simulation analyse IA
            setTimeout(() => {
                const solutions = [
                    "V√©rifiez les capteurs de porte et les guides",
                    "Contr√¥lez l'alimentation √©lectrique du groupe moteur",
                    "Inspectez les c√¢bles et connecteurs principaux",
                    "Nettoyez les cellules photo√©lectriques de s√©curit√©"
                ];
                
                const randomSolution = solutions[Math.floor(Math.random() * solutions.length)];
                
                resultDiv.innerHTML = `
                    <div class="card border-success">
                        <div class="card-header bg-success text-white">
                            <h5><i class="fas fa-check-circle"></i> Diagnostic IA termin√©</h5>
                        </div>
                        <div class="card-body">
                            <p><strong>Probl√®me analys√©:</strong> ${problem.substring(0, 100)}...</p>
                            <div class="alert alert-warning">
                                <h6>Solution recommand√©e:</h6>
                                <p class="mb-0">${randomSolution}</p>
                            </div>
                            <button class="btn btn-success" onclick="alert('Solution appliqu√©e ! L\\'IA a appris de cette intervention.')">
                                <i class="fas fa-check"></i> Marquer comme r√©solu
                            </button>
                        </div>
                    </div>
                `;
            }, 2000);
        }

        function uploadDocument() {
            const brand = document.getElementById('docBrand').value;
            const type = document.getElementById('docType').value;
            
            alert('Fonction d\\'upload pr√™te ! Document ' + brand + ' - ' + type + ' sera enregistr√©.');
            
            // Fermer le modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('uploadModal'));
            modal.hide();
        }

        console.log('‚úÖ Application IA Ascenseurs charg√©e avec correctif connexion');
    </script>
